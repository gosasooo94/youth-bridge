<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ReserveDAO">
    <resultMap type="reserve" id="reserveRM">
        <id property="c_code" column="C_CODE" />
        <result property="memcode" column="MEMCODE" />
        <result property="title" column="TITLE" />
        <result property="startdate" column="STARTDATE" />
        <result property="enddate" column="ENDDATE" />
        <result property="cate" column="CATE" />
    </resultMap>
    
    <insert id="insertReserve" parameterType="reserve">
    <!-- DateTimePicker의 선택한 날짜를 FullCalendar 형식으로 변환하여 저장 -->
    <![CDATA[
    insert into calendar(c_code, memcode, title, startdate, enddate, cate)
    values(cal_seq.nextval, #{memcode}, #{title},
    to_date(#{startdate}, 'YYYY-MM-DD HH24:MI:SS'),
    to_date(#{enddate}, 'YYYY-MM-DD HH24:MI:SS'), #{cate})
    ]]>
</insert>
   
   <select id="getEventList" resultMap="reserveRM">
    <![CDATA[
    SELECT C_CODE, MEMCODE, TITLE,
    TO_CHAR(startdate, 'YYYY-MM-DD"T"HH24:MI:SS') AS STARTDATE,
    TO_CHAR(enddate, 'YYYY-MM-DD"T"HH24:MI:SS') AS ENDDATE,
    CATE
    FROM CALENDAR
    ]]>
</select>
</mapper>