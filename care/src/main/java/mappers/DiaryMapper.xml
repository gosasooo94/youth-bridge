<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="DiaryDAO">

   <insert id="insertDiary" parameterType="diary">
      INSERT INTO NOTE(NOTECODE, NOTETITLE, NOTEDATE, NOTESUN, NOTECONTENT, MEMCODE)
      VALUES(seq_note.nextval, #{notetitle}, sysdate, #{notesun}, #{notecontent}, #{memcode})
   </insert>

   <update id="updateDiary" parameterType="diary">
      UPDATE BOARD SET
      TITLE = #{title},
      CONTENT = #{content}
      WHERE notecode = #{notecode}
   </update>
   
   <delete id="deleteDiary" parameterType="diary">
      DELETE FROM BOARD
      WHERE notecode = #{notecode}
   </delete>
   
   <!-- 일기장 전체 리스트 + 검색-->
   <select id="getDiaryList" parameterType="diary" resultType="diary">
      SELECT * FROM NOTE
      <where>
         <if test="searchCondition != null">
            ${searchCondition} LIKE '%${searchKeyword}%'
         </if>
      </where>
      <!-- WHERE MEMCODE = #{memcodeInt} -->
      ORDER BY NOTECODE DESC
   </select>
   
   <select id="getDiary" parameterType="diary" resultType="diary">
      SELECT * FROM NOTE
      WHERE MEMCODE = #{memcode}
      AND NOTECODE= #{notecode}
   </select>
   
   
</mapper>