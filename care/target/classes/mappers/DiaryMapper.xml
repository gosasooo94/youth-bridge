<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="DiaryDAO">

	<!-- 일기장 전체 리스트 + 검색 --> <!-- ※회원번호로만 글 가져오는거 안되고 있음 확인바람 ※ -->
	<select id="getDiaryList" parameterType="diary"
		resultType="diary">
		SELECT * FROM NOTE
		<where>
			<if test="searchCondition != null">
				${searchCondition} LIKE '%${searchKeyword}%'
			</if>
		</where>
		<!-- WHERE MEMCODE = #{memcodeInt} -->
		ORDER BY NOTECODE DESC
	</select>

	<!-- 글 상세보기 -->
	<select id="getDiary" parameterType="diary" resultType="diary">
		SELECT * FROM NOTE
		WHERE MEMCODE = #{memcode}
		AND NOTECODE= #{notecode}
	</select>

	<insert id="insertDiary" parameterType="diary">
		INSERT INTO NOTE(NOTECODE, NOTETITLE, NOTEDATE, NOTESUN, NOTECONTENT, MEMCODE)
		VALUES(seq_note.nextval, #{notetitle}, sysdate, #{notesun}, #{notecontent}, #{memcode})
	</insert>

	<update id="updateDiary" parameterType="diary">
		UPDATE NOTE SET
		NOTETITLE = #{notetitle},
		NOTECONTENT = #{notecontent}
		WHERE MEMCODE = #{memcode}
		and NOTECODE = #{notecode}
	</update>

	<delete id="deleteDiary" parameterType="diary">
		DELETE FROM NOTE
		WHERE NOTECODE = #{notecode}
	</delete>

</mapper>